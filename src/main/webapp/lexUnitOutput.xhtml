<ui:composition lang="#{localeBean.language}"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/lexUnitIndex.xhtml">
    <ui:define name="lexUnitOutput">
        <div class="ContainerIndent">
            <h:form>
                <p:tabView value="#{tabController.loadedLUs}" var="lu" dynamic="false" cache="true" style="border: none">
                    <p:ajax event="tabClose" listener="#{tabController.onTabLUClose}" update="output"/>
                    <p:tab title="#{lu.lightLU.name}" closable="true">
                        <div class="ContainerIndent">
                            <h:outputText value="" /><br/>
                            <h:outputText value="#{text['frame']} : "/>
                            <p:commandLink action="#{tabController.addFrame(lu.lightLU.frame)}" value="#{lu.lightLU.frame}"/>
                        </div>
                        <p:accordionPanel id="output" multiple="true" activeIndex="0,1">
                            <p:tab title="#{text['lexicalEntry']}">
                                <p:dataTable var="element" value="#{lu.feRealizations}" emptyMessage="" style="padding-top: 10px; padding-bottom: 10px; text-align: center"> 
                                    <p:column headerText="#{text['frameElement']}" style="border: solid 1px #C1D5DF"> 
                                        <h:outputText value="#{element.frameElement.name}" /> 
                                    </p:column> 
                                    <p:column headerText="#{text['numberAnnotated']}" style="border: solid 1px #C1D5DF"> 
                                        <h:outputText value="#{element.totalOccurences}" /> 
                                    </p:column> 
                                    <p:column headerText="#{text['realization']}" style="border: solid 1px #C1D5DF"> 
                                        <p:dataList var="var" value="#{element.patterns}" type="definition" emptyMessage=""> 
                                            <h:outputText value="#{var.valenceUnits.get(0).outputString()}" style="margin-right: 10px"/> 
                                            [<h:outputText value="#{var.annoSet.size()}"/>]
                                        </p:dataList> 
                                    </p:column> 
                                </p:dataTable>
                                <p:dataTable var="group" value="#{lu.feGroupRealizations}" emptyMessage="" style="padding-top: 15px; padding-bottom: 10px"> 
                                    <p:column headerText="#{text['valencePatterns']}">
                                        <p:dataTable var="realization" value="#{group.patterns}" tableStyle="width:auto" style="border: solid 1px #D9E3E8">
                                            <p:column headerText="#{text['total']} [#{group.totalOccurences}]" style="text-align: center; border: none; background-color: transparent">
                                                <h:outputText value="#{realization.annoSet.size()}"/>
                                            </p:column>
                                            <p:columns var="fe" value="#{group.frameElements}" style="text-align: center; background-color: transparent ; border: none; padding-bottom: 0; padding-top: 0; width: 160px">
                                                <f:facet name="header">
                                                    <div style="border: solid 1px #C1D5DF; padding: 5px; background-color: #EEF2F7">
                                                        <h:outputText value="#{fe.name}"/>
                                                    </div>

                                                </f:facet>
                                                <div>
                                                    <h:outputText value="#{realization.outputFE(fe)}" />
                                                </div>
                                            </p:columns>
                                        </p:dataTable>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="#{text['annotation']}">
                                <div>
                                    <p:dataList var="proc" value="#{lu.sentences}" type="definition">
                                        <div id="raw#{lu.sentences.indexOf(proc)}">
                                            <p:commandButton type="button" icon="fa fa-arrows-v Green" onclick="toggle(#{lu.sentences.indexOf(proc)})" style="background-color: transparent"/>
                                            <h:outputText value="#{proc.text}"/>
                                        </div>
                                        <div id="annotated#{lu.sentences.indexOf(proc)}" style="display: none">
                                            <p:dataTable var="output" value="" tableStyle="width:auto" style="width: auto; text-align: center; border: none; margin-bottom: 30px" rowStyleClass="annotation" >
                                                <p:column style="text-align: center; border: none; padding: 0; background-color: transparent">
                                                    <f:facet name="header">
                                                        <p:commandButton type="button" icon="fa fa-arrows-v Green" onclick="toggle(#{lu.sentences.indexOf(proc)})" style="background-color: transparent"/>
                                                    </f:facet>
                                                </p:column>
                                                <p:columns var="tag" value="#{proc.elements}" style="text-align: center; border: none; padding: 0; background-color: transparent">
                                                    <f:facet name="header">
                                                        <h:outputText value="#{tag.element}" style="font-weight: normal; white-space: nowrap"/>
                                                    </f:facet>
                                                    <div class="bordertop" style="border-top: solid 1px #{tag.color}">
                                                        <h:outputText id="tagBtn" value="#{tag.tag}" style="color: #{tag.color}"/>
                                                        <p:overlayPanel id="imagePanel" for="tagBtn" hideEffect="fade">
                                                            <h:outputText value="#{tag.frameElement.definition}" style="font-size: smaller" escape="false"/>
                                                        </p:overlayPanel>
                                                    </div>
                                                </p:columns>
                                            </p:dataTable>
                                        </div>
                                    </p:dataList>
                                </div>
                            </p:tab>
                        </p:accordionPanel>
                    </p:tab>
                </p:tabView>
            </h:form>
        </div>

    </ui:define>
</ui:composition>