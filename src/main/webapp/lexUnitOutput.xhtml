<ui:composition lang="#{localeBean.language}"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/lexUnitIndex.xhtml">
    <ui:define name="lexUnitOutput">
        <div class="ContainerIndent">
            <h:form>
                <p:tabView value="#{tabController.currentLU}" var="lu" dynamic="true" cache="true" style="border: none">
                    <p:ajax event="tabClose" listener="#{tabController.onTabLUClose}" update="output"/>
                    <p:ajax event="tabChange" listener="#{tabController.onTabLUChange}" update="output"/>
                    <p:tab id="a#{lu.id}" title="#{lu.name}" closable="true">
                        <div class="ContainerIndent">
                            <h:outputText value="#{lexUnitController.displayLexUnit(tabController.mainLU)}" /><br/>
                            <h:outputText value="#{text['frame']} : "/>
                            <p:commandLink action="#{tabController.addFrame(lexUnitController.currentLU.getFrame().getName())}" value="#{lexUnitController.currentLU.getFrame().getName()}"/>
                        </div>
                        <p:accordionPanel id="output" multiple="true" activeIndex="0,1">
                            <p:tab title="#{text['lexicalEntry']}">
                                <p:dataTable var="element" value="#{lexUnitController.feRealizations}" emptyMessage="" style="padding-top: 10px; padding-bottom: 10px; text-align: center"> 
                                    <p:column headerText="#{text['frameElement']}"> 
                                        <h:outputText value="#{element.frameElement.name}" /> 
                                    </p:column> 
                                    <p:column headerText="#{text['numberAnnotated']}"> 
                                        <h:outputText value="#{element.totalOccurences}" /> 
                                    </p:column> 
                                    <p:column headerText="#{text['realization']}"> 
                                        <p:dataList var="var" value="#{element.patterns}" type="definition" emptyMessage=""> 
                                            <h:outputText value="#{var.valenceUnits.get(0).outputString()}" style="margin-right: 10px"/> 
                                            [<h:outputText value="#{var.annoSet.size()}"/>]
                                        </p:dataList> 
                                    </p:column> 
                                </p:dataTable>
                                <p:dataTable var="group" value="#{lexUnitController.feGroupRealizations}" emptyMessage="" style="padding-top: 15px; padding-bottom: 10px" rowStyleClass=""> 
                                    <p:column headerText="#{text['valencePatterns']}">
                                        <p:dataTable var="realization" value="#{group.patterns}" tableStyle="width:auto">
                                            <p:column headerText="#{text['total']} [#{group.totalOccurences}]" style="text-align: center; border: none; background-color: transparent">
                                                <h:outputText value="#{realization.annoSet.size()}"/>
                                            </p:column>
                                            <p:columns var="fe" value="#{group.frameElements}" style="text-align: center; background-color: transparent; border: none; padding-bottom: 0; padding-top: 0; width: 160px">
                                                <f:facet name="header">
                                                    <div style="border: solid 1px #C1D5DF; padding: 5px; background-color: #EEF2F7">
                                                        <h:outputText value="#{fe.name}"/>
                                                    </div>

                                                </f:facet>
                                                <div>
                                                    <h:outputText value="#{realization.outputFE(fe)}" />
                                                </div>
                                            </p:columns>
                                        </p:dataTable>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="#{text['annotation']}">
                                <p:dataList var="proc" value="#{lexUnitController.processSentences()}" type="definition">
                                    <p:dataTable var="output" value="" tableStyle="width:auto" style="width: auto; text-align: center; border: none; margin-bottom: 30px" rowStyleClass="annotation" >
                                        <p:columns var="tag" value="#{proc.elements}" style="text-align: center; border: none; padding: 0; background-color: transparent">
                                            <f:facet name="header">
                                                <h:outputText value="#{tag.element}" style="font-weight: normal; white-space: nowrap"/>
                                            </f:facet>
                                            <div class="bordertop" style="border-top: solid 1px #{tag.color}">
                                                <h:outputText id="tagBtn" value="#{tag.tag}" style="color: #{tag.color}"/>
                                                <p:overlayPanel id="imagePanel" for="tagBtn" hideEffect="fade">
                                                    <h:outputText value="#{tag.frameElement.definition}" style="font-size: smaller" escape="false"/>
                                                </p:overlayPanel>
                                            </div>
                                        </p:columns>
                                    </p:dataTable>
                                </p:dataList>
                            </p:tab>
                        </p:accordionPanel>
                    </p:tab>
                </p:tabView>
            </h:form>
        </div>

    </ui:define>
</ui:composition>