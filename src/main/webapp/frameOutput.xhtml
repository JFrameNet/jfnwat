<ui:composition lang="#{localeBean.language}"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/frameIndex.xhtml">
    <ui:define name="frameOutput">
        <h:form>
            <p:tabView value="#{tabController.loadedFrames}" activeIndex="#{tabController.index}" var="frame" dynamic="false" cache="true" style="border: none">
                <p:ajax event="tabClose" listener="#{tabController.onTabClose}" update="output"/>
                <p:tab title="#{frame.name}" closable="true" titleStyle="font-weight: bold">
                    <p:scrollPanel id="output" mode="native" style="height: 580px; border: none; padding: 0">
                        <p:accordionPanel multiple="true" activeIndex="0,1,2,3">
                            <p:tab title="#{text['definition']}" >
                                <h:outputText value="#{frame.definition}" escape="false" style="white-space: pre-wrap; "/>
                            </p:tab>
                            <p:tab title="#{text['frameElements']}">
                                <p:dataTable var="fe" value="#{frame.coreFrameEl}" emptyMessage="">
                                    <p:column style="background-color: transparent; border: none; width: 20%; vertical-align: top" headerText="#{text['core']}">
                                        <div class="ContainerIndent">
                                            <h:outputText value="#{fe.name}" style="margin-right: 10px;"/>
                                            <h:outputText value=" [#{fe.abbrev}]" style="font-size: smaller"/>
                                        </div>
                                    </p:column >
                                    <p:column style="background-color: transparent; border: none">
                                        <div class="ContainerIndent">
                                            <h:outputText value="#{fe.definition}" escape="false" style="white-space: pre-wrap; "/>
                                        </div>
                                    </p:column>
                                </p:dataTable>
                                <p:dataTable var="fe" value="#{frame.nonCoreFrameEl}" emptyMessage="">
                                    <p:column style="background-color: transparent; border: none; width: 20%; vertical-align: top" headerText="#{text['non-core']}">
                                        <div class="ContainerIndent">
                                            <h:outputText value="#{fe.name}" style="margin-right: 10px;"/>
                                            <h:outputText value=" [#{fe.abbrev}]" style="font-size: smaller"/>
                                        </div>
                                    </p:column >
                                    <p:column style="background-color: transparent; border: none">
                                        <div class="ContainerIndent">
                                            <h:outputText value="#{fe.definition}" escape="false" style="white-space: pre-wrap; "/>
                                        </div>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="#{text['frameRelations']}">
                                <div>
                                    <p:dataList var="coreSets" value="#{frame.coreSets}" emptyMessage="" type="definition">
                                        <h:outputText value="#{coreSets}" class="horizontal" style="padding-left: 3px; padding-right: 10px"/>
                                    </p:dataList>
                                    <br/>
                                </div>
                                <div >
                                    <p:dataList var="rel" type="definition" value="#{frame.relations}" emptyMessage="#{text['emptyMessage']}">
                                        <div>
                                            <div class="Wid20 Fleft OvHidden">
                                                <h:outputText value="#{rel.key} :"/>
                                            </div>
                                            <div class="Wid70 OvHidden">
                                                <p:dataList var="related" value="#{rel.value}" type="definition">
                                                    <p:commandLink class="horizontal" action="#{tabController.addFrame(related.name)}" value="#{related.name}" style="padding-left: 3px; padding-right: 10px"/>
                                                </p:dataList>
                                            </div>
                                        </div>
                                    </p:dataList>
                                </div>
                            </p:tab>
                            <p:tab title="#{text['lexUnits']}">
                                <p:dataList var="lexUnit" type="definition" value="#{frame.allLexUnits}" emptyMessage="#{text['emptyMessage']}">
                                    <p:commandLink class="horizontal" action="#{tabController.addLU(lexUnit)}" value="#{lexUnit.name}" style="padding-left: 5px; padding-right: 10px"/>
                                </p:dataList>
                                <div class="EmptyBox20"/>
                            </p:tab>
                        </p:accordionPanel>
                    </p:scrollPanel>
                </p:tab>
            </p:tabView>
        </h:form>
    </ui:define>
</ui:composition>